<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>A Password Manager in Rust</title>
    <link rel="shortcut icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./dist/reset.css" />
    <link rel="stylesheet" href="./dist/reveal.css" />
    <link rel="stylesheet" href="./dist/theme/night.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/tokyo-night-dark.css" />


  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template">
## A Password Manager written in Rust

![](assets/rust-social.jpg) <!-- .element height="15%" width="15%" -->
![](assets/rust_man.png) <!-- .element height="23.5%" width="23.5%" -->

By v1nd1c4t1on
</script></section><section ><section data-markdown><script type="text/template">

## Password Manager

A textbook to put all passwords?

A strongbox to put our all posswords?

![password_manager_logo](assets/pwdmg.png) <!-- .element height="50%" width="50%" -->

</script></section><section data-markdown><script type="text/template">

### generate Key

![gen_key](assets/gen.jpg) <!-- .element height="70%" width="70%" -->

</script></section><section data-markdown><script type="text/template">

### encrypt Data

![enc_data](assets/enc.jpg) <!-- .element height="80%" width="80%" -->

</script></section><section data-markdown><script type="text/template">

### decrypt Data 

![enc_data](assets/dec.jpg) <!-- .element height="100%" width="100%" -->

</script></section></section><section ><section data-markdown><script type="text/template">

## About Keyman

![rust_key](assets/rust_key.jpg)

Let's look some "core" tech.

</script></section><section data-markdown><script type="text/template">

## Architectures

Browser/Server  (B/S)

</script></section><section data-markdown><script type="text/template">

### Two Flame

- Back-end: **Rocket** (most popular)

- Front-end: **React** (most popular) 

![rocket](assets/Rocket.png) <!-- .element height="33%" width="33%" -->
![react](assets/React.jpg) <!-- .element height="30%" width="30%" -->

</script></section><section data-markdown><script type="text/template">

### DataBase

I just use the **sqlite**

```rust
pub struct User{
    pub id: i32,
    pub website: String,
    pub username: String,
    pub password: String,
    pub iv: String,
    #[serde(skip_deserializing)]
    pub create_at: String
} 
```

</script></section><section data-markdown><script type="text/template">

### Crypto


```rust [1-5|7-14]
/// use PBKDF2 to generate the key
let password = master_password.as_bytes();
let mut res = [0_u8; 16]; // should in the heap
pbkdf2::<Hmac<Sha256>>
(password, salt.as_bytes(), count, &mut res);

///use AES to encrypt the password
let mut cipher = aes::ctr(KeySize::KeySize128, aes_key, &iv);
let mut output: Vec<u8> = {
  std::iter::repeat(0u8)
    .take(pwd.len())
    .collect()
};
cipher.process(&pwd, &mut output[..]);
```

</script></section><section data-markdown><script type="text/template">

### Auth 

We just preserve the attributes which is generated by our master password.

```rust [1-4|6-12]
pub struct KeyFile {
    pub salt: MySalt,
    pub count: u32,
}

{ /// preserved json file
  "salt": {
    "str": "K+e58kGBFjYvE4fW1E8wfQ",
    "length": 22
  },
  "count": 10000
}
```

</script></section><section data-markdown><script type="text/template">

### Pro Auth

![auth](assets/auth.jpg)

</script></section><section data-markdown><script type="text/template">

**add varify string**

```json [7-11]
{
  "salt": {
    "str": "TlxHoGafDfG0n7M/34soxQ",
    "length": 22
  },
  "count": 10000,
  "varify": [
    "KioqKioqKioqKioqKioqKg==",
    "lA7MmGc="
  ]
}
```

</script></section><section data-markdown><script type="text/template">
### Easy CRUD ?

- Address JSON In Rust
- CORS
- utf8 Error

![](assets/bugs.png)
...

</script></section></section><section  data-markdown><script type="text/template">

## Demo

</script></section><section ><section data-markdown><script type="text/template">

## Why I chose Rust for Back-end

So many choices...

- Go
- C++
- Java
- python
- even javascript!!!

</script></section><section data-markdown><script type="text/template">

### Performance and Safety

![rust_speed](assets/rust_speed.png) <!-- .element height="70%" width="70%" -->

</script></section><section data-markdown><script type="text/template">

### Cargo

I can do someting like npm!!!
```toml
[dependencies]
...
# used in crypto mod 
rust-crypto = "0.2.36"
pbkdf2 = "0.10"
# hash
sha2 = "0.10.6"
hmac = "0.12.1"
...
```
Amazing crate.io

</script></section><section data-markdown><script type="text/template">

### programming paradigm


![h_l_r](assets/haskell_love_rust.png) <!-- .element height="50%" width="50%" -->

- imperative procedural
- concurrent actor
- object-oriented
- pure functional styles 
- generic programming
- metaprogramming

</script></section><section data-markdown><script type="text/template">

### The best compiler

Omg, It's awesome!!!

![good_compile](assets/good_compile.png)

</script></section><section data-markdown><script type="text/template">

### Global Variable  

I don't like this, but it's pretty cool!

```rust [1|5-8]
pub static mut KEY: Option<&mut [u8; 16]> = None;

pub fn generate_key(...) {
    ...
    unsafe {
        KEY = Some(Box::leak(res_key));   
        println!("{:?}", KEY);
    }
} 

```

</script></section><section data-markdown><script type="text/template">

### Good News

Linus Torvalds: Rust will go into Linux 6.1

![rust_for_linux](assets/rust_for_linux.jpg) <!-- .element height="70%" width="70%" -->


</script></section></section><section  data-markdown><script type="text/template">

## To make progress

- Better Fontend 
- Error and Exception
- Readable
- ...

</script></section><section ><section data-markdown><script type="text/template">

## Oops! it's the end! 

</script></section><section data-markdown><script type="text/template">

## Thank you for watching!</script></section></section></div>
    </div>

    <script src="./dist/reveal.js"></script>

    <script src="./plugin/markdown/markdown.js"></script>
    <script src="./plugin/highlight/highlight.js"></script>
    <script src="./plugin/zoom/zoom.js"></script>
    <script src="./plugin/notes/notes.js"></script>
    <script src="./plugin/math/math.js"></script>
    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath
        ]
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"fade"}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
